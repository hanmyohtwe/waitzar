#include<stdio.h>

/* Provided under BSD-style licenses, see: http://www.libpng.org/pub/png/spec/1.1/PNG-Credits.html */

/* Table of CRCs of all 8-bit messages. */
   unsigned long crc_table[256];
   
   /* Flag: has the table been computed? Initially false. */
   int crc_table_computed = 0;
   
   /* Make the table for a fast CRC. */
   void make_crc_table(void)
   {
     unsigned long c;
     int n, k;
   
     for (n = 0; n < 256; n++) {
       c = (unsigned long) n;
       for (k = 0; k < 8; k++) {
         if (c & 1)
           c = 0xedb88320L ^ (c >> 1);
         else
           c = c >> 1;
       }
       crc_table[n] = c;
     }
     crc_table_computed = 1;
   }
   
   /* Update a running CRC with the bytes buf[0..len-1]--the CRC
      should be initialized to all 1's, and the transmitted value
      is the 1's complement of the final running CRC (see the
      crc() routine below)). */
   
   unsigned long update_crc(unsigned long crc, unsigned char *buf,
                            int len)
   {
     unsigned long c = crc;
     int n;
   
     if (!crc_table_computed)
       make_crc_table();
     for (n = 0; n < len; n++) {
       c = crc_table[(c ^ buf[n]) & 0xff] ^ (c >> 8);
     }
     return c;
   }
   
   /* Return the CRC of the bytes buf[0..len-1]. */
   unsigned long crc(unsigned char *buf, int len)
   {
     return update_crc(0xffffffffL, buf, len) ^ 0xffffffffL;
   }
   

int main()
{
	char src1[] = {0x49, 0x45, 0x4E, 0x44};
	char src2[] = {0x66, 0x6F, 0x4E, 0x74, 0x70, 0x75, 0x6C, 0x70, 0x66, 0x6E, 0x74,
0x0B, 0x00, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x04, 0x00, 0x09, 0x00, 0x0F, 0x00, 0x16, 0x00, 0x1E, 0x00, 0x25,
0x00, 0x2C, 0x00, 0x33, 0x00, 0x39, 0x00, 0x3F, 0x00, 0x45, 0x00,
0x49, 0x00, 0x50, 0x00, 0x83, 0x00, 0x96, 0x00, 0xA0, 0x00, 0xAD,
0x00, 0xB5, 0x00, 0xBE, 0x00, 0xC7, 0x00, 0xD0, 0x00, 0xD8, 0x00,
0xDB, 0x00, 0xE4, 0x00, 0xEC, 0x00, 0xF0, 0x00, 0xF4, 0x00, 0xF8,
0x01, 0x2A, 0x01, 0x34, 0x01, 0x3C, 0x01, 0x45, 0x01, 0x4C, 0x01,
0x55, 0x01, 0x5D, 0x01, 0x64, 0x01, 0x6D, 0x01, 0x74, 0x01, 0x77,
0x01, 0x79, 0x01, 0x93, 0x01, 0xA9, 0x01, 0xB2, 0x01, 0xBB, 0x01,
0xC3, 0x01, 0xCC, 0x01, 0xD5, 0x01, 0xDD, 0x01, 0xE7, 0x01, 0xEA,
0x01, 0xED, 0x01, 0xF1, 0x02, 0x07, 0x02, 0x18, 0x02, 0x29, 0x02,
0x37, 0x02, 0x38, 0x02, 0x46, 0x02, 0x57, 0x02, 0x67, 0x02, 0x78};
	
	printf("crc1: %lX\n", crc(src1, 4));
        printf("crc2: %lX\n", crc(src2, 143));
	
	return 0;
}
      
   
   
   
   

